<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<!-- Based on TemplateMo 553 Xtra Blog: https://templatemo.com/tm-553-xtra-blog -->

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="8 Harjoitus 6: Paikkatietoaineiston editointi | Introduction to QGIS" />
<meta property="og:type" content="book" />





<meta name="author" content="Gispo Ltd." />

<meta name="date" content="2021-12-15" />


<meta name="description" content="8 Harjoitus 6: Paikkatietoaineiston editointi | Introduction to QGIS">

<title>8 Harjoitus 6: Paikkatietoaineiston editointi | Introduction to QGIS</title>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="custom.css" type="text/css" />

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/hamburgers.css" rel="stylesheet">

</head>

<body>


<div class="main-content">
<!-- special comment to mark beginning of title section for bookdown -->
<!-- bookdown comments must be in this order: title, toc, body -->

<div class="main-content-wrapper">

<div class="row">
<div class="col-sm-12">
<header class="main-toc sidebar" id="sidebar">
<div class="sidebar-wrapper">

<button class="navbar-toggle hamburger hamburger--collapse" id="navbar-toggle"
type="button" onclick="navToggle()" aria-label="Toggle navigation">
<span class="hamburger-box"><span class="hamburger-inner"></span></span>
</button>

<div class="sidebar-title-wrapper">
<img alt="Logo" width="100" src="img/gispo_white_sm.png" class="sidebar-logo">
<div class="sidebar-title"><h1>Introduction to QGIS</h1></div>
<div class="abstract-sidebar"><p>A course covering advanced GeoServer topics.</p></div>
</div>

<nav class="sidebar-nav">
<div id="TOC" class="toc">
<ul>
<li><a href="index.html#introduction-to-qgis"><span class="toc-section-number">1</span> Introduction to QGIS</a>
<ul>
<li><a href="index.html#about"><span class="toc-section-number">1.1</span> About</a></li>
<li><a href="index.html#license-and-permissions"><span class="toc-section-number">1.2</span> License and permissions</a></li>
</ul></li>
<li><a href="00_kansi.html#harjoitus-1-qgisin-käyttöliittymä"><span class="toc-section-number">2</span> Harjoitus 1: QGISin käyttöliittymä</a>
<ul>
<li><a href="00_kansi.html#valmistautuminen"><span class="toc-section-number">2.0.1</span> Valmistautuminen</a></li>
<li><a href="00_kansi.html#kurssimateriaalien-lataus"><span class="toc-section-number">2.0.2</span> Kurssimateriaalien lataus</a></li>
<li><a href="00_kansi.html#qgisin-käyttöliittymä"><span class="toc-section-number">2.0.3</span> QGISin käyttöliittymä</a></li>
<li><a href="00_kansi.html#qgis-käyttöliittymän-osat"><span class="toc-section-number">2.0.4</span> QGIS-käyttöliittymän osat</a></li>
<li><a href="00_kansi.html#kokeile-itse"><span class="toc-section-number">2.0.5</span> Kokeile itse</a></li>
<li><a href="00_kansi.html#attribuuttitaulu"><span class="toc-section-number">2.0.6</span> Attribuuttitaulu</a></li>
</ul></li>
<li><a href="02_env.html#training-environment"><span class="toc-section-number">3</span> Training environment</a></li>
<li><a href="02_harjoitus_2.html#harjoitus-2-paikkatietoaineistot-ja--palvelut"><span class="toc-section-number">4</span> Harjoitus 2: Paikkatietoaineistot ja -palvelut</a>
<ul>
<li><a href="02_harjoitus_2.html#valmistautuminen-1"><span class="toc-section-number">4.0.1</span> Valmistautuminen</a></li>
<li><a href="02_harjoitus_2.html#wms-palvelun-lisääminen"><span class="toc-section-number">4.0.2</span> WMS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#wfs-palvelun-lisääminen"><span class="toc-section-number">4.0.3</span> WFS-palvelun lisääminen</a></li>
<li><a href="02_harjoitus_2.html#lisätehtävä-wfs-rajapintapalvelun-kysely-ja-suodatus-sql-lausekkeella"><span class="toc-section-number">4.0.4</span> Lisätehtävä: WFS-rajapintapalvelun kysely ja suodatus SQL-lausekkeella</a></li>
</ul></li>
<li><a href="03_harjoitus_3.html#harjoitus-3-paikkatietoaineiston-visualisointi"><span class="toc-section-number">5</span> Harjoitus 3: Paikkatietoaineiston visualisointi</a>
<ul>
<li><a href="03_harjoitus_3.html#valmistautuminen-2"><span class="toc-section-number">5.0.1</span> Valmistautuminen</a></li>
<li><a href="03_harjoitus_3.html#vektoriaineistojen-visualisointi"><span class="toc-section-number">5.0.2</span> Vektoriaineistojen visualisointi</a></li>
<li><a href="03_harjoitus_3.html#monikulmioaineiston-edistynyt-visualisointi"><span class="toc-section-number">5.0.3</span> Monikulmioaineiston edistynyt visualisointi</a></li>
<li><a href="03_harjoitus_3.html#rasteriaineistojen-visualisointi"><span class="toc-section-number">5.0.4</span> Rasteriaineistojen visualisointi</a></li>
</ul></li>
<li><a href="04_harjoitus_4.html#harjoitus-4-paikkatietoaineiston-nimiöinti-ja-luokittelu"><span class="toc-section-number">6</span> Harjoitus 4: Paikkatietoaineiston nimiöinti ja luokittelu</a>
<ul>
<li><a href="04_harjoitus_4.html#valmistautuminen-3"><span class="toc-section-number">6.0.1</span> Valmistautuminen</a></li>
<li><a href="04_harjoitus_4.html#nimiöiden-tyyli--ja-yleisasetukset"><span class="toc-section-number">6.0.2</span> Nimiöiden tyyli- ja yleisasetukset</a></li>
<li><a href="04_harjoitus_4.html#vektoriaineiston-luokittelut"><span class="toc-section-number">6.0.3</span> Vektoriaineiston luokittelut</a></li>
<li><a href="04_harjoitus_4.html#rasteriaineiston-luokittelut"><span class="toc-section-number">6.0.4</span> Rasteriaineiston luokittelut</a></li>
<li><a href="04_harjoitus_4.html#lisätehtävä-nimiöiden-piirtäminen"><span class="toc-section-number">6.0.5</span> Lisätehtävä: nimiöiden piirtäminen</a></li>
</ul></li>
<li><a href="05_harjoitus_5.html#harjoitus-5-karttatuloste"><span class="toc-section-number">7</span> Harjoitus 5: Karttatuloste</a>
<ul>
<li><a href="05_harjoitus_5.html#valmistautuminen-4"><span class="toc-section-number">7.0.1</span> Valmistautuminen</a></li>
<li><a href="05_harjoitus_5.html#karttatuloste"><span class="toc-section-number">7.0.2</span> Karttatuloste</a></li>
<li><a href="05_harjoitus_5.html#lisätehtävä-kartta-atlas"><span class="toc-section-number">7.0.3</span> Lisätehtävä: kartta-atlas</a></li>
</ul></li>
<li><a href="06_harjoitus_6.html#harjoitus-6-paikkatietoaineiston-editointi"><span class="toc-section-number">8</span> Harjoitus 6: Paikkatietoaineiston editointi</a>
<ul>
<li><a href="06_harjoitus_6.html#valmistautuminen-5"><span class="toc-section-number">8.0.1</span> Valmistautuminen</a></li>
<li><a href="06_harjoitus_6.html#vektoriaineiston-geopackage-luominen"><span class="toc-section-number">8.0.2</span> Vektoriaineiston (GeoPackage) luominen</a></li>
<li><a href="06_harjoitus_6.html#digitoitavan-tason-tietorakenne"><span class="toc-section-number">8.0.3</span> Digitoitavan tason tietorakenne</a></li>
<li><a href="06_harjoitus_6.html#pohjakartan-lisääminen"><span class="toc-section-number">8.0.4</span> Pohjakartan lisääminen</a></li>
<li><a href="06_harjoitus_6.html#digitoinnin-aloittaminen"><span class="toc-section-number">8.0.5</span> Digitoinnin aloittaminen</a></li>
<li><a href="06_harjoitus_6.html#lisätehtävä-cad-digitointi"><span class="toc-section-number">8.0.6</span> Lisätehtävä: CAD-digitointi</a></li>
</ul></li>
</ul>
</div>
</nav>
</div>
</header>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="harjoitus-6-paikkatietoaineiston-editointi" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Harjoitus 6: Paikkatietoaineiston editointi</h1>
<div id="harjoituksen-sisältö-5" class="section level4" number="8.0.0.1">
<h4><span class="header-section-number">8.0.0.1</span> Harjoituksen sisältö</h4>
<p>Harjoituksessa digitoidaan uusi vektorimuotoinen paikkatietoaineisto.</p>
</div>
<div id="harjoituksen-tavoite-4" class="section level4" number="8.0.0.2">
<h4><span class="header-section-number">8.0.0.2</span> Harjoituksen tavoite</h4>
<p>Opiskelija oppii kuinka paikkatietoaineistoja tuotetaan ja editoidaan.</p>
</div>
<div id="valmistautuminen-5" class="section level3" number="8.0.1">
<h3><span class="header-section-number">8.0.1</span> Valmistautuminen</h3>
<p>Luo uusi QGIS-projekti ja tallenna se nimellä (<strong>Projekti → Tallenna nimellä…</strong>) “<strong>QGIS_harjoitus_6</strong>”.</p>
</div>
<div id="vektoriaineiston-geopackage-luominen" class="section level3" number="8.0.2">
<h3><span class="header-section-number">8.0.2</span> Vektoriaineiston (GeoPackage) luominen</h3>
<p>Luodaan uusi GeoPackage-aineisto valitsemalla työkalupalkista Uusi <strong>GeoPackage-taso…</strong>
<img src="img/harjoitus_6/image21.png" alt="uusi_geopackage_tase_image" />
Tee alla näkyvät valinnat <strong>GeoPackage-ikkunaan</strong>. Muista nimetä aineisto sopivalla tavalla (tässä esim. alueet), valitse <strong>Geometriatyyppi-kohtaan MultiPolygoni</strong>, valitse koordinaattijärjestelmäksi ETRS89 / TM35FIN(E,N) EPSG:3067 (harjoittelemme digitointia Espoossa käytössämme Suomen valtakunnallinen tasokoordinaattijärjestelmä TM35FIN). Muista vielä lopuksi lisätä <strong>Nimi-attribuutti Lisää ominaisuustietolistaan -toiminnolla</strong>.
<img src="img/harjoitus_6/image14.png" alt="geopackage_ikkuna_image" />
Avaa juuri luomasi tason attribuuttitaulukko ja tarkista, että se on tyhjä. Tarkista myös, että määrittelemäsi kentät näkyvät sarakkeina.
<img src="img/harjoitus_6/image4.png" alt="attribuuttitaulukko_image" />
<strong>Fid-kenttä</strong> muodostuu automaattisesti ja <strong>Nimi-kentän</strong> loimme itse äskeisessä määrittelyikkunassa.
Tarkastellaan nyt attribuutteja lähemmin <strong>Tason ominaisuudet -ikkunassa</strong>. Avaa juuri luomasi Alueet-tason Tason ominaisuudet -ikkuna ja valitse vasemmalta <strong>Attribuutit (aikaisemmin Fields)</strong>. Attribuutit-välilehdessä pystytään muokkaamaan attribuuttitaulun tietorakennetta. Aseta muokkaus päälle klikkaamalla kynäikonia. Uuden kentän pystyt lisäämään <strong>Uusi kenttä -painikkeesta</strong>, joka on varustettu keltaisella tähti-ikonilla.
Anna uudelle kentälle nimi “<strong>aluetyyppi</strong>” ja aseta tyypiksi “<strong>Teksti</strong>” ylläolevan kuvan mukaisesti. Klikkaa <strong>OK</strong> lisätäksesi uuden kentän listaan. Klikkaa tämän jälkeen uudestaan kynäikonia lopettaaksesi muokkauksen ja tallenna muutokset.
<img src="img/harjoitus_6/image1.png" alt="aluetyyppi" /></p>
</div>
<div id="digitoitavan-tason-tietorakenne" class="section level3" number="8.0.3">
<h3><span class="header-section-number">8.0.3</span> Digitoitavan tason tietorakenne</h3>
<p>Jatketaan edelleen <strong>Tason ominaisuudet -ikkunassa</strong>. Valitse nyt vasemmalta <strong>Attribuuttilomake-välilehti</strong>. Tässä välilehdessä voit määrittää sääntöjä ja rajoituksia laatimillesi tietokentille (ts. taulun sarakkeille). Kyseiset määritykset auttavat säilyttämään tietorakenteen sekä itse tiedon laadun ja helpottavat myös digitointia.
Valitse <strong>Käytettävissä olevista käyttöliittymäelementit -kohdasta</strong> aluetyyppi-kenttä ja valitse <strong>Muokkauksen tyyppi -kohdasta Arvoluettelo</strong> alla olevan kuvan tapaan. Mikäli et näe nyt aluetyyppi-saraketta, sulje vielä <strong>Tason ominaisuudet -ikkuna</strong> ja avaa se uudelleen.
<img src="img/harjoitus_6/image11.png" alt="arvoluettelo_image" />
Arvoluettelon avulla käyttäjän on mahdollista määrittää arvoja vetovalikosta editointia tehdessään. Muokkaa soluja tuplaklikkaamalla. Määritä arvot kuvassa näkyvän luettelon mukaisesti. Kirjaa myös aluetyypeille kuvaukset halutessasi. Kuvauksista on hyötyä yleisesti tietorakenteiden eheyden ylläpitämiseksi. Kun olet valmis, klikkaa <strong>OK</strong> palataksesi karttanäkymään.</p>
</div>
<div id="pohjakartan-lisääminen" class="section level3" number="8.0.4">
<h3><span class="header-section-number">8.0.4</span> Pohjakartan lisääminen</h3>
<p>Voit käyttää digitoinnin pohjana Maanmittauslaitoksen ilmakuvia. Lisää nyt ortoilmakuva <strong>L4131F.jp2-rasteritiedosto</strong> kansiosta <strong>…/kurssihakemisto/MML/Ortoilmakuvat/</strong> QGISiin. Muista, että myös rasteriaineistot saat käyttöösi helposti raahaamalla tiedoston karttaikkunaan tai <strong>Tasot-paneeliin</strong>.
<img src="img/harjoitus_6/image13.png" alt="maanmittauslaitoksen_ilmakuvia_image" /></p>
</div>
<div id="digitoinnin-aloittaminen" class="section level3" number="8.0.5">
<h3><span class="header-section-number">8.0.5</span> Digitoinnin aloittaminen</h3>
<p>Valitse kartalta mieleisesi alue, jota lähdet digitoimaan. Zoomaa tarpeeksi lähelle, jotta erotat digitoitavat alueet hyvin (esim. rakennukset).
<img src="img/harjoitus_6/image3.png" alt="esim_rakennukset" />
<strong>Tarttumisen työkalut</strong> - työkalupalkin saa kiinnitettyä käyttöliittymään (ellei se jo siinä ole) joko…
1 … painamalla QGISin käyttöliittymän reunoilla hiiren oikealla ja rastittamalla Työkalut-kohdan alta Tarttumisen työkalut tai sitten
2 … avaamalla erillisen ikkunan tarttumisen asetuksille ylämenusta Työkalut → Tarttumisen työkalut.
Aktivoi itse työkalu käyttöösi työkalupakistasi löytyvästä punaisesta <strong>magneetti-ikonista</strong> ja aseta sen asetukset seuraavasti.
<img src="img/harjoitus_6/image9.png" alt="magneetti_image" />
Asetuksissa määritetään tarttumiseen käytettävä yksikkö (metri) ja etäisyys (5 metriä). Lisäksi asetetaan tarttumisen kohdistuvan aktiiviseen tasoon, sen taitepisteisiin ja/tai segmentteihin sekä myös <strong>Topologinen muokkaus</strong> ja <strong>Tarttuminen risteyksessä</strong> (Snapping on intersection).
<img src="img/harjoitus_6/image7.png" alt="digitointi_image" />
Klikkaa seuraavaksi <strong>Lisää monikulmiokohde -työkalua</strong> ja aloita digitointi.
<img src="img/harjoitus_6/image17.png" alt="lisaa_monikulmiokohde_image" />
Muista, että voit muokata <strong>Tarttumisen asetuksia</strong> palaamalla yllä kuvattuun ikkunaan ja jättämällä se ikkunan sivuun muokataksesi asetuksia nopeasti. Digitoi nyt 5-8 polygonia. Kun olet valmis, klikkaa jälleen kynä-ikonia lopettaaksesi ja tallentaaksesi editoinnin.
<img src="img/harjoitus_6/image18.gif" alt="tarttumisen_asetuksia_gif_image" />
Päällekkäisten kohteiden syntymisen voi myös välttää alla olevan animaation tavalla.
<img src="img/harjoitus_6/image19.gif" alt="paallekaisten_kohteiden_image" /></p>
<p>Tämän saavuttaaksesi voit aktivoida <strong>Vältä leikkauksia -valinnan</strong> päälle <strong>Avaa tarttumisen asetukset… -valikosta</strong>. Avaa ensin <strong>Tarttumisen työkalut -paneelista Avaa tarttumisen asetukset</strong>.</p>
<p><img src="img/harjoitus_6/image12.png" alt="avaa_tarttumisen_valinnat_image" />
Näin sinulle aukeaa alla olevan mukainen tarttumisen asetukset määrittelyikkuna, jossa voit tehdä määrityksiä muun muassa leikkausten suhteen. Leikkauksilla viitataan tässä kohteiden niin sanottuihin intersektioihin.
<img src="img/harjoitus_6/image16.png" alt="valta_leikkauksia_image" />
&gt; Psst! Muista tallentaa QGIS-projekti harjoituksen lopuksi.</p>
</div>
<div id="lisätehtävä-cad-digitointi" class="section level3" number="8.0.6">
<h3><span class="header-section-number">8.0.6</span> Lisätehtävä: CAD-digitointi</h3>
<p>Voit kokeilla myös CAD-pohjaista digitointia, joka on kehittynyt verrattain paljon QGISin uudessa versiossa. Työkalut saat esiin lisäämällä <strong>Digitoinnin lisätyökalut</strong> -ylämenusta <strong>Näytä → Työkalut → Digitoinnin lisätyökalut</strong>.
Kokeile erilaisia työkaluja, esimerkiksi Täytä piiri -työkalua. Tätä voit hyödyntää esimerkkitapauksena peltoja digitoidessa. Kuvitellaan, että peltojen sisään jää aina välillä pieniä metsäsaarekkeita, jotka olisi digitoitava
<img src="img/harjoitus_6/image8.png" alt="tayta_piiri_image" />
metsä-kohteiksi. <strong>Täytä piiri -työkalulla</strong> pystyt irrottamaan alueen omaksi objektiksi (ks. kuva alla).
<img src="img/harjoitus_6/image2.png" alt="metsa_image" />
### Lisätehtävä: ominaisuustietojen lisääminen
Seuraavaksi laskemme pinta-alan ominaisuustietoja edellä muodostettuun paikkatietoaineistoon. Avaa Alueet-tason ominaisuustietotaulu (attribuuttitaulu).
<img src="img/harjoitus_6/image15.png" alt="avaa_alueet_tase_image" />
Laita muokkaustila taas päälle kynäikonista ja muokkaa muutamaa Nimi-kentän alueen nimeä samalla tavalla kun tekisit laskentataulussa (tuplaklikkaamalla). Huomaa, että muokkaaminen on mahdollista vain jos muokkaustila on päällä.
Avaa nyt <strong>Kentän arvojen laskin -työkalu</strong> seuraavan pikakuvakkeen avulla:
<img src="img/harjoitus_6/image5.jpg" alt="avaa_arvojen_laskin_image" />
Tällä toiminnolla voimme luoda uusia tai päivittää jo olemassa olevia ominaisuustietotaulun kenttiä. Pinta-alan laskentaa varten muunnetaan neliömetrit neliökilmetreiksi jakamalla pinta-ala 1 000 000:lla. Kirjoitetaan <strong>Lauseke-kenttään</strong> kaava <strong>$area / 1000000</strong>.
<img src="img/harjoitus_6/image10.jpg" alt="kentan_arvojen_laskin_image" />
Painamalla <strong>OK</strong> saat laskettua kunkin alueen pinta-alan omaan kenttäänsä:
<img src="img/harjoitus_6/image20.jpg" alt="omaan_kenttaansa" /></p>

<p>#Harjoitus 7: Paikkatietoanalyysit</p>
<p>####Harjoituksen sisältö
Harjoituksessa tutustutaan QGISin erilaisiin paikkatietoanalyyseihin.</p>
<p>####Harjoituksen tavoite
Koulutettava oppii käyttämään eri aineistoille tarkoitettuja paikkatietoanalyysejä tarkoituksenmukaisesti.</p>
<p>###Valmistautuminen
Luo uusi QGIS-projekti ja tallenna se nimellä (<strong>Projekti → Tallenna nimellä…) “QGIS_harjoitus_7”</strong>.
Lisää projektiin <strong>kunta1000k_2017.gpkg</strong>-tiedosto (<strong>…/kurssihakemisto/Tilastokeskus/kunnat2017/</strong>), jossa on Suomen kuntarajat.
Lisää karttaprojektiin vielä Maanmittauslaitoksen 1:1M yleiskartan <strong>TieViiva-aineisto</strong> (kansiosta <strong>…/kurssihakemisto/MML/YK_1M/</strong>).
Voit asettaa kunnat-monikulmion täytevärin pois ja saada siten tieviiva-aineiston paremmin näkyviin:
<img src="img/harjoitus_7/image14.gif" alt="kuvaustekniikka" />
Karttanäkymä näyttää nyt kunkin väriasetuksia lukuunottamatta tältä:
<img src="img/harjoitus_7/image4.png" alt="näkymä" />
Voit tarkistaa/muokata projektisi koordinaattijärjestelmän asetuksia <strong>Projekti → Properties → Koordinaattijärjestelmä</strong> -välilehdessä tai klikkaamalla oikeasta alareunasta:
<img src="img/harjoitus_7/image2.png" alt="koordinaattijärjestelmä" />
Kummatkin tavat avaavat projektin koordinaattijärjestelmän määrityslomakkeen. Tarkista, että järjestelmä on ETRS89 / ETRS-TM35FIN.
Muista, että voit lisätä ongelmitta projektiisi aineistoja eri karttaprojektioissa. Monet analyysityökalut eivät kuitenkaan toimi, jos analyysin lähtöaineistot eivät ole samassa koordinaattijärjestelmässä.</p>
<p>Huomautus GK-koordinaatiston EPSG-koodeista!
Suomalaiset koordinaattijärjestelmät (vanhat ja uudet) ovat pääosin hyvin tuettuina QGIS-ohjelmistossa. On kuitenkin huomautettava, että EPSG-määrittelyissä on lievää epäjohdonmukaisuutta. Esimerkiksi tarkemmat GK-koordinaattijärjestelmän koodit löytyvät EPSG:n luettelosta kahteen kertaan: EPSG:3126 – EPSG:3138 koodeilla löytyvät koordinaattijärjestelmät ETRS-GK19FIN - ETRS-GK31FIN. Nämä ovat kuitenkin ”virheellisiä”, keskimeridiaanin koordinaatti on aina 500 000.
OIKEAT EPSG-koodit: EPSG:3873 - EPSG:3885
VIRHEELLISET EPSG-koodit: EPSG:3126 - EPSG:3138</p>
<p>###Vektorianalyysit
Tässä harjoituksessa on tarkoitus etsiä ne kunnat, joiden alueella kulkee suomalainen versio kuuluisasta Route 66 -tiestä. Lyhyesti harjoituksen kulku on seuraava:
- Valitaan tieaineistosta ne tieviivat, joiden numero on 66
- Tehdään spatiaalinen analyysi kunta- ja tieviiva-aineiston kanssa, jonka myötä viiva-aineisto saa kunta-aineiston sisältämät tiedot
- Yhdistetään tieviivat kunnan nimen avulla</p>
<p>Monista <strong>TieViiva taso</strong> hiiren oikealla näppäimellä aukeavasta valikosta <strong>Monista taso</strong> vaihda uuden tason nimeksi <em>Finnish Route 66</em>:ksi samasta valikosta <strong>Nimeä taso</strong>.
Samasta valikosta löytyy myös <strong>Suodata</strong> -toiminto, joka määrittelee, mitä aineiston kohteita tämä taso käyttää.</p>
<p>Kirjoita <strong>Suodattimena käytettävä lauseke</strong> -kenttään ”Tienumero” = 66. Saat kentän nimen suoraan lausekkeeseen <strong>Tietokentät</strong>-kohdasta tuplaklikkaamalla ja <strong>Operaattorit</strong>-kuvakkeita klikkaamalla. Kun painat OK, karttanäkymässä näkyy enää suodattimen läpäisevät kohteet.
<img src="img/harjoitus_7/image6.png" alt="suodatin" />
Seuraavaksi lähdemme käsittelemään aineistoja <strong>Vektori</strong>-ylämenusta, josta löytyvät ensisijaiset työkalut vektorianalyysien toteuttamiseen:
<img src="img/harjoitus_7/image10.png" alt="vektorivalikko" /></p>
<p>Käynnistä <strong>Ristiinleikkaus(intersection…)</strong>-työkalu <strong>Geoprosessointi</strong>-valikosta. Määrittele leikattavaksi tasoksi tiestöaineisto ja leikkaavaksi tasoksi kuntaraja-aineisto:
<img src="img/harjoitus_7/image1.png" alt="ristiinleikkaus" />
Suorita analyysi painamalla Suorita ja paina sen jälkeen <strong>Sulje</strong>. Analyysi luo uuden väliaikaisen tulostason nimeltä <strong>Ristiinleikkaus (intersection)</strong>.
Karttaikkunassa aineisto näyttää samalta kuin alkuperäinen aineisto. Vertaile tasojen (<strong>Finnish Route 66</strong> ja <strong>Ristiinleikkaus (intersection)</strong>) ominaisuustietoja. Mitä huomaat?
Seuraavaksi voit visualisoida syntyneen tulostason tieviivat kunkin kunnan osalta eri välillä: määrittele kuvaustekniikka luokittelemalla tiestö kunnan nimen perusteella käyttäen kenttää Nimi.
Aktivoi <strong>Näytä kohteiden lukumäärä</strong> -toiminto (paina hiiren oikealla näppäimellä tason nimen päällä Tasoluettelossa).
<img src="img/harjoitus_7/image12.gif" alt="lukumäärä" /></p>
<p>Tasoluettelossa luokittelun pitäisi näyttää suunnilleen seuraavalta (värit ja viivojen paksuus on sen mukainen kuin olet määritellyt):
<img src="img/harjoitus_7/image13.png" alt="luokittelu" /></p>
<p>Seuraavaksi voimme yhdistää erilliset tieviivat <strong>Sulauta</strong>-työkalun (Dissolve) avulla. Valitse työkalu <strong>Vektori-Geoprosessointi → Sulauta</strong>. Sulauta tieviivat kunnan nimen (tai numeron) perusteella ja tallenna lopputulos kurssihakemistoon haluamallasi nimellä (esimerkiksi kunta_sulautettu.shp). Täytä asetukset Sulauta-ikkunassa kuvan mukaisesti:
<img src="img/harjoitus_7/image5.png" alt="sulauta" />
Paina <strong>Suorita</strong> ja sitten <strong>Sulje</strong>.
Voit kopioida aiemmin luodun tason tyylin helposti uudelle aineistoille. Valitse hiiren oikealla näppäimellä avautuvasta valikosta <strong>Tyyli → Kopioi tyyli</strong>. Valitse äsken luotu taso ja <strong>Tyyli → Liitä tyyli</strong>. Kun laitat vielä kohteiden lukumäärän näkyviin, niin lopputuloksen pitäisi tasoluettelossa olla seuraava:
<img src="img/harjoitus_7/image11.png" alt="sulautettu" />
Lopuksi voimme laskea, kuinka pitkä pätkä tietä nro. 66 osuu kunkin kunnan alueelle. Avaa ominaisuustietotaulukko ja käytä <strong>Kentän arvojen laskin</strong>-työkalua. Luo uusi kenttä, jossa on kunkin tieviivan pituus hyödyntämällä Geometria-ryhmästä <strong>$length</strong>-funktiota.
<img src="img/harjoitus_7/image7.png" alt="taulukko" />
Psst! Muista tallentaa QGIS-projekti harjoituksen lopuksi.</p>
<p>##Lisätehtävä: ominaisuustietojen lisääminen ja tarkastelu
Lopuksi voimme laskea, kuinka suuri osa suhteellisesti (osuus koko pituudesta) tietä nro. 66 osuu kunkin kunnan alueelle. Prosenttilaskun toimittamiseksi tarvitset tiedon tiesegmenttien yhteenlasketusta kokonaispituudesta eli summasta, jonka saat käyttöösi Kenttien tilastolliset tunnusluvut -työkalun avulla: avaa yläpalkista <strong>Prosessointi → Työkalut</strong> ja kirjoita hakukenttään Kenttien tilastolliset tunnusluvut.
<img src="img/harjoitus_7/image3.png" alt="tilastot" />
Anna avautuvassa ikkunassa kentäksi, josta tilastot lasketaan, edellisessä tehtävässä laskemasi pituus-kenttä:
Prosenttilasku tehdään samalla tavalla kuin pituuden tai pinta-alan laskenta eli tehdään uusi sarake, jonka kohteille lasketaan arvot seuraavan funktion avulla (heittomerkkien sisään jäävä sana/merkkijono viittaa sarakkeen nimeen ja ‘summa’ laskemaasi arvoon):
(“Pituus” / summa)*100
Lopuksi voit visualisoida kartalle kunkin kunnan osuuden haluamallasi tavalla.</p>

<p>#Harjoitus 8: QGISin lisäosat</p>
<p>###Harjoituksen sisältö
Harjoituksessa asennetaan muutama QGIS-lisäosa.</p>
<p>###Harjoituksen tavoite
Koulutettava oppii asentamaan QGIS-lisäosia ja ymmärtää niiden toimintaperiaatteet.</p>
<p>###Valmistautuminen
Käynnistä QGIS-ohjelmisto. Avaa uusi QGIS-projekti ja tallenna se nimellä (<strong>Projekti → Tallenna nimellä…) “QGIS_harjoitus_8”</strong>.
Lataa projektiin seuraavat aineistot:
<strong>…/kurssihakemisto/MML/Korkeusmalli_2m/L4133B.asc (korkeusmalli)</strong> ja
<strong>…/kurssihakemisto/HSY/Vaestotietoruudukko_2019.gpkg</strong></p>
<p>###Lisäosien hallinta
Lisäosia lisätään käyttöön päävalikosta <strong>Lisäosat → Hallitse ja asenna lisäosia…</strong> -valikon kautta.
Valitse <em>Asennettu</em>-välilehti ja saat esille kaikki asennetut lisäosat. Huomaa, että suurinta osaa niistä ei ole aktivoitu. Lisäosien aktivointi lisää erilaisia valikkoja ja paneeleja QGISin käyttöliittymään. Siksi on hyödyllistä piilottaa ne joita ei käytetä.</p>
<p>###QuickMapServices
<strong>QuickMapServices (QMS) -lisäosan</strong> kautta saat QGISin karttaprojektiin erilaisia taustakarttoja verkosta, kuten OpenStreetMaps, Google Maps tai Bing Maps.
Avaa <strong>Lisäosat → Hallitse ja asenna lisäosia…</strong>, valitse <strong>Kaikki</strong>-välilehti ja etsi quickmapservices tekstillä:</p>
<p style="text-align: center;">
<a href="05_harjoitus_5.html"><button class="btn btn-default">Previous</button></a>
<a href="07_harjoitus_7.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<footer class="footer text-center">

<div class="footer-container text-center">

<div class="footer-info">
<h5 class="footer-title">Introduction to QGIS</h5>
<span class="footer-version">v2021-12-15</span>
<div class="license"><img src="img/by-nd.svg" width="80px" alt="CC-BY-ND"></div>
</div>

<div class="footer-info">
<h5 class="footer-title footer-company">Gispo Ltd.
<span class="footer-copyright-year">© 2021</span></h5>
<span class="footer-contact-info">Kalevankatu 31
<br>00100 Helsinki, Finland
<br>info@gispo.fi
</span>
</div>

</div>
</div>
</footer>
</div>


<script src="js/nav-script.js"></script>

</body>
</html>
